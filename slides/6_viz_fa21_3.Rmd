
---
title: "Visualization - Aesthetic Mapping"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      
   

---
class: inverse, middle, center

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(message = FALSE)
```

```{r xaringan-tile-view, echo=FALSE}
xaringanExtra::use_tile_view()
```


```{r xaringan-panelset, echo=FALSE}
xaringanExtra::use_panelset()
```

```{r, echo=FALSE}
xaringanExtra::use_webcam()
```

```{r xaringan-fit-screen, echo=FALSE}
xaringanExtra::use_fit_screen()


```

```{r, echo=FALSE, message=FALSE}

library(tidyverse)
library(knitr)    # For knitting document and include_graphics function
df <- read_csv('https://covid19.who.int/WHO-COVID-19-global-data.csv')

library(lubridate)

df$month <- factor(month(df$Date_reported))

df$day <- wday(df$Date_reported)
df$day_type <- case_when(df$day < 6 ~ 'weekday',
                         TRUE~'weekend')

```
---
# A visualization:

--

- is a geometry object (a geom)

--

- whose aesthetics

--

- represents variables

--

- from a data set


---
# Aesthetics mean

--

- “something you can see”. 

--

Examples include:

- position (i.e., on the x and y axes)
- color (“outside” color)
- fill (“inside” color)
- shape (of points)
- size

---
# Aesthetics Mapping

--

- map

--

- variables

--

- to aesthetics


---
```{r, message=FALSE}
df %>% filter(Country %in% c('United States of America','Canada', Date_reported>)) %>%  ggplot()+
  geom_point(mapping = aes(x = Date_reported, y = Cumulative_cases, color = Country))
```

---
```{r, message=FALSE}
df %>% filter(Country %in% c('United States of America','Canada')) %>%  ggplot()+
  geom_line(mapping = aes(x = Date_reported, y = Cumulative_cases, color = Country))
```

---
```{r, message=FALSE}
df %>% ggplot()+
  geom_smooth(mapping = aes(x = pos_in, y = d_in, color = month))
```

---
```{r, message=FALSE}
df %>% filter(state=='RI'|state=='MA') %>% ggplot()+
  geom_density(mapping = aes(x = pos_in, color = state))
```
---
```{r, message=FALSE}
df %>% filter(state=='RI'|Province_State=='MA') %>% ggplot()+
  geom_bar(mapping = aes(x = data_qual, fill = state))
```
---
# Aesthetic of a geom

- A geom has its list of own aesthetics

- Use `?geom_point()` to check for the list of `geom_point`

- Some aesthetics are required, some are not

---
class: inverse, middle, center
# Required Aesthetics

---
```{r, message=FALSE}
df %>% filter(state=='RI'|state=='MA') %>% ggplot()+
  geom_point(mapping = aes(x = date, y = pos_in, color = state))
```
---
```{r, message=FALSE}
df %>% filter(state=='RI'|state=='MA') %>% ggplot()+
  geom_point(mapping = aes(x = date, y = pos_in))
```

---
```{r, message=FALSE, eval=FALSE}
df %>% filter(state=='RI'|state=='MA') %>% ggplot()+
  geom_point(mapping = aes(x = date))
```

- Will produce an error since `y` aesthetic is required for `geom_point`. 

---
class: inverse, middle, center
# Common Visualization Practices

---
# One Continuous Variable

- Density: `geom_density`

- Histogram: `geom_histogram`

- Boxplot: `geom_boxplot`

---
**One Continuous Variable: Density**

```{r}
df %>% ggplot()+
  geom_histogram(mapping = aes(x = pos_in))
```

---
**One Continuous Variable: Histogram**

```{r}
df %>% ggplot()+
  geom_histogram(mapping = aes(x = pos_in))
```
---
**One Continuous Variable: Boxplot**

```{r}
df %>% ggplot()+
  geom_boxplot(mapping = aes(y = pos_in))
```
---
**One Continuous Variable: Boxplot**

```{r}
df %>% filter(pos_in<1000) %>% ggplot()+
  geom_boxplot(mapping = aes(y = pos_in))
```
---
**One Categorical Variable: Bar chart**

```{r}
df %>% ggplot()+
  geom_bar(mapping = aes(x = data_qual))
```

---
# Two Continuous Variables

- Scatter Plot: `geom_point`
- Line Plot: `geom_line`
- Smooth Plot: `geom_smooth`

---
# One Continuous Variable + One Categorical Variable

- Density
- BoxPlot

---
**One Continuous + One Categorical: Density**

```{r}
df %>% ggplot()+
  geom_density(mapping = aes(x = pos_in, color = data_qual))
```

---
**One Continuous + One Categorical: Density**

```{r}
df %>% filter(pos_in<1000) %>% ggplot()+
  geom_density(mapping = aes(x = pos_in, color = data_qual))
```

---
**One Continuous + One Categorical: Boxplot**

```{r}
df %>% ggplot()+
  geom_boxplot(mapping = aes(x = pos_in, y = data_qual))

```
---
**One Continuous + One Categorical: Boxplot**

```{r}
df %>% filter(pos_in<1000) %>% ggplot()+
  geom_boxplot(mapping = aes(x = pos_in, y = data_qual))

```
---
# One Categorical Variable + One Categorical Variable

- Barplot

---
**One Categorical + One Categorical: Barplot**

```{r}
df %>% ggplot()+
  geom_bar(mapping=aes(x=month, fill=data_qual), position='dodge')

```
---
# More

- [ggplot cheat sheet](https://rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf)

